---
import BaseLayout from '@/layouts/BaseLayout.astro';
import Navbar from '@/components/Navbar.astro';
import Footer from '@/components/Footer.astro';
import ToolTemplate from '@/components/ToolTemplate';
import VideoTutorialSection from '@/components/VideoTutorialSection.astro';
import RelatedTools from '@/components/RelatedTools.astro';
import ToolFAQ from '@/components/ToolFAQ.astro';
import { mergePDFs } from '@/utils/pdfUtils';
import { generateToolSEO, generateToolStructuredData, generateHowToStructuredData, generateFAQStructuredData } from '@/utils/seo';
import toolsData from '@/config/tools.json';

const toolId = 'merge-pdf';
const tool = toolsData.tools.find((t: any) => t.id === toolId);
const siteUrl = import.meta.env.PUBLIC_SITE_URL || 'https://pdfelitetools.com';

// Generate SEO data
const seoData = tool ? generateToolSEO(tool, siteUrl) : {};
const structuredData = tool ? generateToolStructuredData(tool, siteUrl) : {};

// HowTo steps
const howToSteps = [
  { name: "Upload PDF files", text: "Upload multiple PDF files by dragging and dropping or clicking to browse. You can upload up to 50 PDF files at once." },
  { name: "Reorder files", text: "Drag and drop files to reorder them in your desired sequence. The order you set here will be the order in the merged PDF." },
  { name: "Merge PDFs", text: "Click 'Process Files' to merge all PDFs into one document. The process is instant and happens in your browser." },
  { name: "Download merged PDF", text: "Download your merged PDF file instantly. The file is ready immediately with no watermarks or limitations." }
];

const howToStructuredData = tool ? generateHowToStructuredData(tool, howToSteps, siteUrl) : {};

// FAQ for featured snippets
const toolFAQs = [
  {
    question: "How do I merge PDF files online?",
    answer: "To merge PDF files online, simply upload your PDF files using drag and drop or click to browse. Reorder them as needed, then click 'Process Files' to merge them into one document. The process is instant and free."
  },
  {
    question: "Is it free to merge PDF files?",
    answer: "Yes, merging PDF files is completely free. There are no watermarks, no sign-up required, and no hidden costs. You can merge unlimited PDF files for free."
  },
  {
    question: "How many PDF files can I merge at once?",
    answer: "You can merge up to 50 PDF files at once. Each file can be up to 150MB in size. There's no limit on the total number of pages."
  },
  {
    question: "Will my files be secure?",
    answer: "Yes, your files are processed entirely in your browser. They never leave your device and are deleted immediately after processing. We don't store or access your files."
  },
  {
    question: "Can I reorder pages before merging?",
    answer: "Yes, you can drag and drop files to reorder them before merging. The order you set will be the final order in your merged PDF document."
  }
];

const faqStructuredData = generateFAQStructuredData(toolFAQs);

// Combine all structured data
const allStructuredData = {
  "@context": "https://schema.org",
  "@graph": [
    structuredData,
    howToStructuredData,
    faqStructuredData
  ]
};
---

<BaseLayout
  title={seoData.title || "Merge PDF Online Free | PDFEliteTools"}
  description={seoData.description || "Merge multiple PDF files into a single document. Drag and drop to reorder pages. Fast, secure, and free PDF merger tool."}
  canonical="/tools/merge-pdf"
  keywords={seoData.keywords}
  structuredData={allStructuredData}
  breadcrumbs={seoData.breadcrumbs}
>
  <Navbar />

  <ToolTemplate
    client:load
    toolName="Merge PDF"
    toolDescription="Combine multiple PDF files into one document with drag-and-drop reordering"
    toolIcon="ðŸ”—"
    acceptedFormats={['.pdf']}
    maxFileSize={100}
    maxFiles={50}
    multiple={true}
    toolType="merge-pdf"
    outputFileName={(name) => name.replace(/\.pdf$/i, '_merged.pdf')}
  >
    <!-- Watch How It Works Video Section -->
    <VideoTutorialSection 
      toolName="Merge PDF"
      description="Learn how to merge multiple PDF files in just 2 minutes. See real examples and get started combining your documents today."
      videoUrl={import.meta.env.PUBLIC_MERGE_PDF_VIDEO_URL || undefined}
      watchTime="2 min watch"
    />

    <div class="glass p-8 rounded-2xl border border-gray-200/50 dark:border-gray-700/50">
      <h3 class="text-2xl font-bold mb-6 text-gray-900 dark:text-white">How to Merge PDFs Online Free</h3>
      <ol class="space-y-4 text-gray-600 dark:text-gray-400">
        {howToSteps.map((step, index) => (
          <li class="flex items-start space-x-3">
            <span class="flex-shrink-0 w-8 h-8 bg-primary-600 text-white rounded-full flex items-center justify-center font-bold">{index + 1}</span>
            <div>
              <p class="font-semibold text-gray-900 dark:text-white mb-1">{step.name}</p>
              <p>{step.text}</p>
            </div>
          </li>
        ))}
      </ol>
    </div>
  </ToolTemplate>

  <!-- Related Tools Section (iLovePDF style) -->
  {tool && (
    <RelatedTools currentToolId={toolId} currentCategory={tool.category} />
  )}

  <!-- FAQ Section for Featured Snippets -->
  <ToolFAQ toolName="Merge PDF" faqs={toolFAQs} />

  <Footer />
</BaseLayout>


